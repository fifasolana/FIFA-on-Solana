<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIFA Token Statistics</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background-color: #033399; 
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .stats { 
            margin: 20px; 
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .card {
            background-color: white;
            color: #033399;
            border-radius: 8px;
            padding: 20px;
            margin: 10px;
            width: 300px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .card img {
            width: 100%;
            border-radius: 8px 8px 0 0;
        }
        .card .container {
            padding: 16px;
        }
        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #033399;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px;
            cursor: pointer;
        }
        .price-change-positive {
            color: green;
        }
        .price-change-negative {
            color: red;
        }
        .social-link {
            display: block;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>FIFA Token Statistics</h1>
    <div class="stats" id="stats"></div>
    <script>
        const players = [
            {
                name: 'Ronaldo',
                ca: 'BHZDqqUuFJLX51upfnDjpNg5x4wniUQD88rLhE3oAP4j'
            },
            {
                name: 'PelÃ©',
                ca: 'EDdoFGdpby82tS2JJ6X2koZhFkPK94hPv6RjmFvP6P3m'
            }
        ];

        function formatNumber(number) {
            if (number >= 1e6) {
                return `$${(number / 1e6).toFixed(1)}M`;
            } else if (number >= 1e3) {
                return `$${(number / 1e3).toFixed(1)}K`;
            } else {
                return `$${number}`;
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Contract address copied to clipboard');
            }, (err) => {
                console.error('Could not copy text: ', err);
            });
        }

        async function fetchTokenData(ca) {
            const url = `https://api.dexscreener.com/latest/dex/tokens/${ca}`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                const tokenData = data.pairs.find(pair => pair.baseToken.address.toLowerCase() === ca.toLowerCase());
                console.log(tokenData);  // Debug output
                return {
                    name: tokenData ? tokenData.baseToken.name : 'N/A',
                    symbol: tokenData ? tokenData.baseToken.symbol : 'N/A',
                    priceUsd: tokenData && tokenData.priceUsd ? tokenData.priceUsd : 'N/A',
                    txns5m: tokenData ? tokenData.txns.m5.buys + tokenData.txns.m5.sells : 'N/A',
                    txns24h: tokenData ? tokenData.txns.h24.buys + tokenData.txns.h24.sells : 'N/A',
                    volume5m: tokenData ? tokenData.volume.m5 : 'N/A',
                    volume24h: tokenData ? tokenData.volume.h24 : 'N/A',
                    priceChange5m: tokenData ? tokenData.priceChange.m5 : 'N/A',
                    priceChange24h: tokenData ? tokenData.priceChange.h24 : 'N/A',
                    liquidity: tokenData && tokenData.liquidity ? tokenData.liquidity.usd : 'N/A',
                    marketCap: tokenData ? tokenData.fdv : 'N/A',
                    url: tokenData ? tokenData.url : 'N/A',
                    image: tokenData ? tokenData.info.imageUrl : 'https://example.com/default-image.png',
                    socials: tokenData ? tokenData.socials : [],
                };
            } catch (error) {
                console.error('Error fetching token data:', error);
                return {
                    name: 'N/A',
                    symbol: 'N/A',
                    priceUsd: 'N/A',
                    txns5m: 'N/A',
                    txns24h: 'N/A',
                    volume5m: 'N/A',
                    volume24h: 'N/A',
                    priceChange5m: 'N/A',
                    priceChange24h: 'N/A',
                    liquidity: 'N/A',
                    marketCap: 'N/A',
                    url: 'N/A',
                    image: 'https://example.com/default-image.png',
                    socials: [],
                };
            }
        }

        async function displayPlayers() {
            const statsDiv = document.getElementById('stats');
            for (const player of players) {
                const tokenData = await fetchTokenData(player.ca);
                const playerCard = document.createElement('div');
                playerCard.className = 'card';
                playerCard.innerHTML = `
                    <img src="${tokenData.image}" alt="${player.name}">
                    <div class="container">
                        <h4><b>${tokenData.name} (${tokenData.symbol})</b></h4>
                        <p><button class="copy-button" onclick="copyToClipboard('${player.ca}')">Copy CA</button></p>
                        <p>Price USD: ${tokenData.priceUsd !== 'N/A' ? `$${parseFloat(tokenData.priceUsd).toFixed(2)}` : 'N/A'}</p>
                        <p>TXNS 5m: ${tokenData.txns5m}</p>
                        <p>TXNS 24h: ${tokenData.txns24h}</p>
                        <p>Volume 5m: ${formatNumber(tokenData.volume5m)}</p>
                        <p>Volume 24h: ${formatNumber(tokenData.volume24h)}</p>
                        <p>Price Change 5m: <span class="${tokenData.priceChange5m >= 0 ? 'price-change-positive' : 'price-change-negative'}">${tokenData.priceChange5m !== 'N/A' ? `${tokenData.priceChange5m.toFixed(2)}%` : 'N/A'}</span></p>
                        <p>Price Change 24h: <span class="${tokenData.priceChange24h >= 0 ? 'price-change-positive' : 'price-change-negative'}">${tokenData.priceChange24h !== 'N/A' ? `${tokenData.priceChange24h.toFixed(2)}%` : 'N/A'}</span></p>
                        <p>Liquidity: ${formatNumber(tokenData.liquidity)}</p>
                        <p>Market Cap: ${formatNumber(tokenData.marketCap)}</p>
                        <p><a href="${tokenData.url}" target="_blank">DEXSCREENER</a></p>
                        ${tokenData.socials.map(social => social.url ? `<a href="${social.url}" target="_blank" class="social-link">${social.type.charAt(0).toUpperCase() + social.type.slice(1)}</a>` : '').join('')}
                    </div>
                `;
                statsDiv.appendChild(playerCard);
            }
        }

        displayPlayers();
    </script>
</body>
</html>
